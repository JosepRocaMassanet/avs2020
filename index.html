<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>UGT - AVS 2024-2029</title>
    <style>
        body {
            font-family: 'Open Sans Condensed', sans-serif;
        }
        .columna-izquierda {
            text-align: left;
            margin-right: 0px;
            padding-right: 10px;
            float: left;
            width: 270px;
        }
        .pregunta {
            margin-bottom: 15px;
            text-align: left;
            padding-left: 10px;
        }
        #submit {
            width: 150px;
            height: 55px;
            border: medium;
            margin-top: 20px;
            cursor: pointer;
            align-content: center;
            font-size: 20px;
            border-style: double;
        }
        input, select {
            border-radius: 5px;
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            font-size: 1em;
            font-weight: 300;
            padding: 5px;
            width: 120px;
        }
    </style>
    <script>
        function truncar(numero, digitos) {
            const truncar = 10 ** digitos;
            return Math.floor(numero * truncar) / truncar;
        }

        function calculateAVS(event) {
            event.preventDefault();

            const form = document.forms[0];
            const formData = new FormData(form);
            
            const pagaeficiencia = parseFloat(formData.get('pagaeficiencia')) || 0;
            const pagaeficienciaMensual = pagaeficiencia / 12;

            const salconv = parseFloat(formData.get('salconv')) || 0;
            const sir1 = parseFloat(formData.get('sir1')) || 0;
            const sir2 = parseFloat(formData.get('sir2')) || 0;
            const sir4 = parseFloat(formData.get('sir4')) || 0;
            const sir5 = parseFloat(formData.get('sir5')) || 0;
            const sir6 = parseFloat(formData.get('sir6')) || 0;
            const extra = ((salconv + sir1 + sir2 + sir4 + sir5 + sir6) * 2) / 12;

            const cp1 = parseFloat(formData.get('cp1')) || 0;
            const cp2 = parseFloat(formData.get('cp2')) || 0;
            const cp3 = parseFloat(formData.get('cp3')) || 0;
            const cp4 = parseFloat(formData.get('cp4')) || 0;
            const cp5 = parseFloat(formData.get('cp5')) || 0;
            const cp6 = parseFloat(formData.get('cp6')) || 0;
            const cp7 = parseFloat(formData.get('cp7')) || 0;
            const turno = parseFloat(formData.get('turno')) || 0;
            const turno2 = parseFloat(formData.get('turno2')) || 0;
            const horasNocturnasAnuales = 68 * 8;
            const nocturnidad = (parseFloat(formData.get('nocturnidad')) || 0) * (horasNocturnasAnuales / 12);
            const reten = parseFloat(formData.get('reten')) || 0;
            const amct = parseFloat(formData.get('amct')) || 0;
            const antig = parseFloat(formData.get('antig')) || 0;
            const antig2 = parseFloat(formData.get('antig2')) || 0;
            const edad = formData.get('edad');
            let irpf = parseFloat(formData.get('irpf')) || 0;
            const fija = parseFloat(formData.get('fija')) || 0;
            const fija2 = parseFloat(formData.get('fija2')) || 0;
            const fija3 = parseFloat(formData.get('fija3')) || 0;
            const sing = parseFloat(formData.get('sing')) || 0;
            const sing1 = parseFloat(formData.get('sing1')) || 0;
            const salariosingular = parseFloat(formData.get('salariosingular')) || 0;
            const cp10 = parseFloat(formData.get('cp10')) || 0;
            const cp11 = parseFloat(formData.get('cp11')) || 0;
            const cp15 = parseFloat(formData.get('cp15')) || 0;
            const cp16 = parseFloat(formData.get('cp16')) || 0;
            const indiv = parseFloat(formData.get('indiv')) || 0;
            const indiv2 = parseFloat(formData.get('indiv2')) || 0;
            const vinc = parseFloat(formData.get('vinc')) || 0;
            const anig3 = parseFloat(formData.get('anig3')) || 0;
            const anig6 = parseFloat(formData.get('anig6')) || 0;
            const anig4 = parseFloat(formData.get('anig4')) || 0;
            const anig5 = parseFloat(formData.get('anig5')) || 0;
            const anigfecsa = parseFloat(formData.get('anigfecsa')) || 0;
            const aniguadisa = parseFloat(formData.get('aniguadisa')) || 0;
            const anigheasa = parseFloat(formData.get('anigheasa')) || 0;
            const anighedatsa = parseFloat(formData.get('anighedatsa')) || 0;
            const anigpysesa = parseFloat(formData.get('anigpysesa')) || 0;
            const retenlab4 = parseFloat(formData.get('retenlab4')) || 0;
            const retenfest = parseFloat(formData.get('retenfest')) || 0;
            const nocturnidad2 = (parseFloat(formData.get('nocturnidad2')) || 0) * (horasNocturnasAnuales / 12);
            const geo = parseFloat(formData.get('geo')) || 0;
            const ofv = parseFloat(formData.get('ofv')) || 0;
            const auxdec = parseFloat(formData.get('auxdec')) || 0;
            const auxdec2 = parseFloat(formData.get('auxdec2')) || 0;
            const auxdis = parseFloat(formData.get('auxdis')) || 0;
            const comp20 = parseFloat(formData.get('comp20')) || 0;
            const anigviesgo = parseFloat(formData.get('anigviesgo')) || 0;
            const anignansa = parseFloat(formData.get('anignansa')) || 0;
            const anigterbesa = parseFloat(formData.get('anigterbesa')) || 0;
            const anigter = parseFloat(formData.get('anigter')) || 0;
            const anigpaga = parseFloat(formData.get('anigpaga')) || 0;
            const retenlab = parseFloat(formData.get('retenlab')) || 0;
            const retenlab2 = parseFloat(formData.get('retenlab2')) || 0;
            const retenfest2 = parseFloat(formData.get('retenfest2')) || 0;
            const turnoab = parseFloat(formData.get('turnoab')) || 0;
            const turnoab2 = parseFloat(formData.get('turnoab2')) || 0;
            const turnodis = parseFloat(formData.get('turnodis')) || 0;
            const turnodis2 = parseFloat(formData.get('turnodis2')) || 0;
            const mantaspontes = parseFloat(formData.get('mantaspontes')) || 0;
            const ceutamelilla = parseFloat(formData.get('ceutamelilla')) || 0;
            const auxdis2 = parseFloat(formData.get('auxdis2')) || 0;
            const pension = parseFloat(formData.get('pension')) || 0;
            const coefred = formData.get('coefred');
            const espvida = parseFloat(formData.get('espvida')) || 0;
            const br = parseFloat(formData.get('br')) || 0;
            const cr = parseFloat(formData.get('cr')) || 0;

            let soluciona = salconv + sir1 + sir2 + sir4 + sir5 + sir6 + cp1 + cp2 + cp3 + cp4 + cp5 + cp6 + cp7 + turno + turno2 + nocturnidad + antig + antig2 + reten + amct + fija + fija2 + fija3 + sing + sing1 + salariosingular + cp10 + cp11 + cp15 + cp16 + indiv + indiv2 + vinc + anig3 + anig6 + anig4 + anig5 + anigfecsa + aniguadisa + anigheasa + anighedatsa + anigpysesa + retenlab4 + retenfest + nocturnidad2 + geo + ofv + auxdec + auxdec2 + auxdis + comp20 + anigviesgo + anignansa + anigterbesa + anigter + anigpaga + retenlab + retenlab2 + retenfest2 + turnoab + turnoab2 + turnodis + turnodis2 + mantaspontes + ceutamelilla + auxdis2 + extra + pagaeficienciaMensual;

            let tramo = 0;
            if (edad === "tramo1") {
                tramo = 0.60;
            } else if (edad === "tramo2") {
                tramo = 0.70;
            } else if (edad === "tramo3") {
                tramo = 0.75;
            } else if (edad === "tramo4") {
                tramo = 0.80;
            }

            let solucionb = soluciona * tramo;
            let irpfAdjusted = 100 - irpf;
            let solucion = (solucionb * irpfAdjusted) / 100;

            let pen = 0;
            if (coefred === "cr1") {
                pen = 16;
            } else if (coefred === "cr2") {
                pen = 15;
            } else if (coefred === "cr3") {
                pen = 14;
            } else if (coefred === "cr4") {
                pen = 13;
            }

            const mermabr = (br * pen) / 100;
            const penreduc = br - mermabr;
            const branual = br * 12;
            const anos = espvida - 63;
            const pensionmes = pension / 12;
            const pension12 = pension / 14;
            const difpenreduc = (pensionmes * cr) / 100;
            const penreduc2 = pensionmes - difpenreduc;

            let merma = 0;
            if (penreduc > penreduc2) {
                merma = pensionmes - penreduc2;
            } else {
                merma = pensionmes - penreduc;
            }

            const merma1 = merma * 12;
            const mermames1 = merma / 12;
            let inc = 0;
            let mermainc = merma * 12;
            for (let i = 1; i <= anos; i++) {
                inc = mermainc * 0.015;
                mermainc += inc;
            }

            const mermaTotal = merma1 * anos + mermainc;

            const pago = soluciona * 0.80;
            const solucionx = pago * 12 - penreduc2;
            let merma2 = 0;
            if (penreduc > penreduc2) {
                merma2 = pago - penreduc2;
            } else {
                merma2 = pago - penreduc;
            }

            document.getElementById('result').innerHTML = `
                <h1>CÁLCULO ORIENTATIVO APROXIMADO AL ACOGERSE AL AVS 2024-2029</h1>
                <h4>(En ningún caso el siguiente resultado tiene validez vinculante, sino que es un cálculo meramente orientativo)</h4>
                <fieldset>
                    <legend><h2>Resultado</h2></legend>
                    <ul>
                        <li>Parte proporcional de las pagas extra prorrateadas a 12 mensualidades: €${truncar(extra, 2)}/mes.</li>
                        <li>Paga de eficiencia prorrateada: €${truncar(pagaeficienciaMensual, 2)}/mes.</li>
                        <li>Base Total sin aplicar el ${tramo * 100}% de reducción: €${truncar(soluciona, 2)}/mes.</li>
                        <li>Base bruta en AVS, sin aplicar el ${irpf}% de IRPF: €${truncar(solucionb, 2)}/mes.</li>
                    </ul>
                    <h1>Salario neto aproximado en prejubilación: €${truncar(solucion, 2)}/mes.</h1>
                </fieldset>
                <fieldset>
                    <legend><h2>Mermas a liquidar en el AVS 2024-2029</h2></legend>
                    <ul>
                        <li>Base Reguladora: €${br}/mes</li>
                        <li>Aplicamos el Coeficiente Reductor por Ley del ${pen}% por jubilación anticipada, quedando una pensión teórica de: €${truncar(penreduc, 2)}/mes</li>
                        <li>La pensión máxima actual es de: €${truncar(pensionmes, 2)}/mes</li>
                        <li>Límite Máximo 2020 (0,5/trimestre), penaliza un ${cr}% por 2 años sin cotizar al máximo, quedando una pensión teórica de: €${truncar(penreduc2, 2)}/mes</li>
                        <li>Por tanto existe una merma mensual de: €${truncar(merma, 2)}/mes</li>
                    </ul>
                    <h3>La merma de pensión por jubilación anticipada es un pago único de aprox.: €${truncar(mermaTotal, 2)} (Crecimiento de un 1,5% anual)</h3>
                    <h3>La merma de compensación hasta la fecha de jubilación ordinaria es un pago mensual bruto de aprox.: €${truncar(merma2, 2)}/mes</h3>
                </fieldset>
            `;

            document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</head>
<body background="UGT-COLOR.png">
    <center><h2>CÁLCULO APROXIMADO DE LA MENSUALIDAD AL ACOGERSE AL AVS</h2></center>
    <center><h4>Toma tu nómina y rellena las casillas de los conceptos incluidos en el cálculo del AVS<br>(Usa puntos en lugar de comas para los decimales)</h4></center>
    <form onsubmit="calculateAVS(event);">
        <div id="page">
            <fieldset>
                <legend><h2>Conceptos incluidos en el AVS</h2></legend>
                <div class="columna-izquierda">
                    <div class="pregunta">
                        <label>1010 - Salario Convenio Marco: </label>
                        <input type="number" name="salconv" value="0">
                    </div>
                    <div class="pregunta">
                        <label>1030: Retribución Fija</label>
                        <input type="number" name="fija" value="0">
                    </div>
                    <div class="pregunta">
                        <label>1040 - Salario Pers Singular:</label>
                        <input type="number" name="salariosingular" value="0">
                    </div>
                    <div class="pregunta">
                        <label>1060 - Sal. Indiv. Reconocido 2:</label>
                        <input type="number" name="sir2" value="0">
                    </div>
                    <div class="pregunta">
                        <label>1090 - Sal. Indiv. Reconocido 5: </label>
                        <input type="number" name="sir5" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2011 - Complemento Individual: </label>
                        <input type="number" name="indiv2" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2020 - Complemento Personal 1: </label>
                        <input type="number" name="cp1" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2040 - Complemento Personal 3: </label>
                        <input type="number" name="cp3" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2060 - Complemento Personal 5: </label>
                        <input type="number" name="cp5" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2080 - Complemento Personal 7: </label>
                        <input type="number" name="cp7" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2005 - Complemento Puesto Indiv: </label>
                        <input type="number" name="indiv" value="0">
                    </div>
                    <div class="pregunta">
                        <label>Plus Jorn Mantenim AMCT: </label>
                        <input type="number" name="amct" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2A04 - Comp Personal 10: </label>
                        <input type="number" name="cp10" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2A07 - Comp Personal 15: </label>
                        <input type="number" name="cp15" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2A01 - Vinculación Enher: </label>
                        <input type="number" name="vinc" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2A02 - Antigüedad ERZ: </label>
                        <input type="number" name="anig3" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2A62 - Antigüedad Fecsa: </label>
                        <input type="number" name="anigfecsa" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2A68 - Antigüedad: </label>
                        <input type="number" name="anig6" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2A63 - Antigüedad Guadisa: </label>
                        <input type="number" name="aniguadisa" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2A71 - Antigüedad Heasa: </label>
                        <input type="number" name="anigheasa" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2A72 - Antigüedad Hedatsa: </label>
                        <input type="number" name="anighedatsa" value="0">
                    </div>
                    <div class="pregunta">
                        <label>2A73 - Antigüedad Pysesa: </label>
                        <input type="number" name="anigpysesa" value="0">
                    </div>
                    <div class="pregunta">
                        <label>3250 - Dife. Reten.Lab.menos16h: </label>
                        <input type="number" name="retenlab4" value="0">
                    </div>
                    <div class="pregunta">
                        <label>3280 - Comp.Pers Reten Fest/desc: </label>
                        <input type="number" name="retenfest" value="0">
                    </div>
                    <div class="pregunta">
                        <label>3110 - Turno Cerrado Cont CM: </label>
                        <input type="number" name="turno" value="0">
                    </div>
                    <div class="pregunta">
                        <label>3120 - CP Turno Cerr Cont: </label>
                        <input type="number" name="turno2" value="0">
                    </div>
                    <div class="pregunta">
                        <label>3300 - Comp.Horas Nocturn CM: (€/hora)</label>
                        <input type="number" name="nocturnidad" value="0">
                    </div>
                    <div class="pregunta">
                        <label>3310 - CP Hora Nocturna CM: (€/hora) </label>
                        <input type="number" name="nocturnidad2" value="0">
                    </div>
                    <div class="pregunta">
                        <label>5070 - Sist.Gestión Objeti. Geo: </label>
                        <input type="number" name="geo" value="0">
                    </div>
                    <div class="pregunta">
                        <label>5075 - Gestión Rendimiento OFV: </label>
                        <input type="number" name="ofv" value="0">
                    </div>
                    <div class="pregunta">
                        <label>9175 - Aux.Ded. CCCED Ere/Pens: </label>
                        <input type="number" name="auxdec" value="0">
                    </div>
                    <div class="pregunta">
                        <label>9176 - Aux.Dedic. CCCED Ereable: </label>
                        <input type="number" name="auxdec2" value="0">
                    </div>
                    <div class="pregunta">
                        <label>9195 - Aux.Disp.Trans.8ªEre/Pens:</label>
                        <input type="number" name="auxdis" value="0">
                    </div>
                </div>
                <div class="pregunta">
                    <label>1020 - Retribución Fija Excluids:</label>
                    <input type="number" name="fija2" value="0">
                </div>
                <div class="pregunta">
                    <label>1031 - Retribuc. Fija Individual:</label>
                    <input type="number" name="fija3" value="0">
                </div>
                <div class="pregunta">
                    <label>1050 - Sal. Indiv. Reconocido 1:</label>
                    <input type="number" name="sir1" value="0">
                </div>
                <div class="pregunta">
                    <label>1080 - Sal. Indiv. Reconocido 4: </label>
                    <input type="number" name="sir4" value="0">
                </div>
                <div class="pregunta">
                    <label>1100 - Sal. Indiv. Reconocido 6: </label>
                    <input type="number" name="sir6" value="0">
                </div>
                <div class="pregunta">
                    <label>2030- Complemento Personal 2: </label>
                    <input type="number" name="cp2" value="0">
                </div>
                <div class="pregunta">
                    <label>2050 - Complemento Personal 4: </label>
                    <input type="number" name="cp4" value="0">
                </div>
                <div class="pregunta">
                    <label>2070 - Complemento Personal 6: </label>
                    <input type="number" name="cp6" value="0">
                </div>
                <div class="pregunta">
                    <label>2A15 - Antig Sueldo Empresa GESA: </label>
                    <input type="number" name="antig" value="0">
                </div>
                <div class="pregunta">
                    <label>2A60 - Antig Comp Puesto GE: </label>
                    <input type="number" name="antig2" value="0">
                </div>
                <div class="pregunta">
                    <label>2010 - Compto. Personal Singular: </label>
                    <input type="number" name="sing" value="0">
                </div>
                <div class="pregunta">
                    <label>2025 - Compto. Personal Sing 1: </label>
                    <input type="number" name="sing1" value="0">
                </div>
                <div class="pregunta">
                    <label>3240 - Retén Labor.Menos 16 horas: </label>
                    <input type="number" name="reten" value="0">
                </div>
                <div class="pregunta">
                    <label>2A06 - Comp Personal 11: </label>
                    <input type="number" name="cp11" value="0">
                </div>
                <div class="pregunta">
                    <label>2A08 - Comp Personal 16: </label>
                    <input type="number" name="cp16" value="0">
                </div>
                <div class="pregunta">
                    <label>2A03 - Antig.no pensionable FECSA: </label>
                    <input type="number" name="anig4" value="0">
                </div>
                <div class="pregunta">
                    <label>2A61 - Antig.Total pensionable FECSA: </label>
                    <input type="number" name="anig5" value="0">
                </div>
                <div class="pregunta">
                    <label>2A09 - Compens.20 años Servicio: </label>
                    <input type="number" name="comp20" value="0">
                </div>
                <div class="pregunta">
                    <label>2A64 - Antigüedad Viesgo: </label>
                    <input type="number" name="anigviesgo" value="0">
                </div>
                <div class="pregunta">
                    <label>2A66 - Antigüedad Nansa: </label>
                    <input type="number" name="anignansa" value="0">
                </div>
                <div class="pregunta">
                    <label>2A69 - Antigüedad Terbesa: </label>
                    <input type="number" name="anigterbesa" value="0">
                </div>
                <div class="pregunta">
                    <label>2A70 - Antigüedad EE. Ter: </label>
                    <input type="number" name="anigter" value="0">
                </div>
                <div class="pregunta">
                    <label>Paga Social SE,ERZ,GU,GI,ENE: </label>
                    <input type="number" name="anigpaga" value="0">
                </div>
                <div class="pregunta">
                    <label>3210 - Retén Labor.16 o +Horas: </label>
                    <input type="number" name="retenlab" value="0">
                </div>
                <div class="pregunta">
                    <label>3220 - Comp.Pers.RetenLab.16o+: </label>
                    <input type="number" name="retenlab2" value="0">
                </div>
                <div class="pregunta">
                    <label>3270 - Reten dias festiv.y desca: </label>
                    <input type="number" name="retenfest2" value="0">
                </div>
                <div class="pregunta">
                    <label>3060 - Turno Abierto Cont CM: </label>
                    <input type="number" name="turnoab" value="0">
                </div>
                <div class="pregunta">
                    <label>3070 - C.Pers. T.Abiert Cont CM: </label>
                    <input type="number" name="turnoab2" value="0">
                </div>
                <div class="pregunta">
                    <label>3160 - Turno Abierto Discon CM: </label>
                    <input type="number" name="turnodis" value="0">
                </div>
                <div class="pregunta">
                    <label>3170 - CP Turno Ab Disc CM: </label>
                    <input type="number" name="turnodis2" value="0">
                </div>
                <div class="pregunta">
                    <label>Plus Jorn Mnto As Pontes: </label>
                    <input type="number" name="mantaspontes" value="0">
                </div>
                <div class="pregunta">
                    <label>Plus Resid Ceuta Melilla: </label>
                    <input type="number" name="ceutamelilla" value="0">
                </div>
                <div class="pregunta">
                    <label>9196 - Aux.Disp.Trans.8ªEreable:</label>
                    <input type="number" name="auxdis2" value="0">
                </div>
                <div class="pregunta">
                <label>Paga de eficiencia (anual): </label>
                <input type="number" name="pagaeficiencia" value="0">
                </div>

            </fieldset>
            <fieldset>
                <legend><h2>Datos personales</h2></legend>
                <label>¿Cuantos años faltan para tu jubilación ordinaria? </label>
                <select name="edad">
                    <option value="tramo1">Más de 11 años, hasta 15 años (60%)</option>
                    <option value="tramo2">Más de 8 años, hasta 11 años (70%)</option>
                    <option value="tramo3">Más de 5 años, hasta 8 años (75%)</option>
                    <option value="tramo4">Hasta 5 años (80%)</option>
                </select><br><br>
                <label>% IRPF aproximado: </label>
                <input type="number" name="irpf" value="0">
            </fieldset>
            <fieldset>
                <legend><h2>Datos para el cálculo de mermas</h2></legend>
                <div>Cálculo desde los 63 años hasta la Esperanza de Vida actual</div><br>
                <div class="pregunta"><label>Base Reguladora (BR): </label><input type="number" name="br" value="4909.50"></div>
                <div class="pregunta"><label>Pensión Máxima Anual: </label><input type="number" name="pension" value="45746.40"></div>
                <div class="pregunta"><label>¿Cuantos años has cotizado? </label>
                <select name="coefred">
                    <option value="cr1">Menos de 38 años y 6 meses (coeficiente reductor 8% anual)</option>
                    <option value="cr2">Más de 38 años y 6 meses y menos de 41 años y 6 meses (coeficiente reductor 7.5% anual)</option>
                    <option value="cr3">Más de 41 años y 6 meses y menos de 44 años y 6 meses (coeficiente reductor 7% anual)</option>
                    <option value="cr4">Más de 44 años y 6 meses (coeficiente reductor 6.5%)</option>
                </select><br><br>
                <div class="pregunta"><label>Coeficiente reductor por Renta Máxima: </label><input type="number" name="cr" value="4"> (0.5%/Trimestre)</div>
                <div class="pregunta"><label>Esperanza de Vida Actual: </label><input type="number" name="espvida" value="0"></div>
            </fieldset>
            <div><input id="submit" type="submit" name="submit" value="Calcular"></div>
        </div>
    </form>
    <div id="result"></div>
</body>
</html>
